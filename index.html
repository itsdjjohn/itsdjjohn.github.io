<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>DJ John - Sitio Oficial</title>
  <meta name="description" content="Sitio oficial de DJ John - Eventos, música y más.">
  <link rel="icon" type="image/png" href="https://raw.githubusercontent.com/itsdjjohn/djjohn/main/favicon.png">
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600;700&display=swap" rel="stylesheet">
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }
    html {
      scroll-behavior: smooth;
    }
    body {
      font-family: 'Montserrat', sans-serif;
      background: linear-gradient(rgba(0,0,0,0.7), rgba(0,0,0,0.7)), url('https://raw.githubusercontent.com/itsdjjohn/djjohn/main/bbce7d73-f8ec-4838-b760-3e9889a87eb7.png');
      background-size: cover;
      background-position: center;
      background-attachment: fixed;
      color: #f0f0f0;
      line-height: 1.6;
    }
    a {
      color: inherit;
      text-decoration: none;
    }
    .container {
      max-width: 1200px;
      margin: 0 auto;
      padding: 40px 20px;
    }
    /* Preloader */
    #preloader {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: #000;
      display: flex;
      justify-content: center;
      align-items: center;
      z-index: 9999;
      transition: opacity 0.5s ease;
    }
    #preloader img {
      max-width: 150px;
      animation: pulse 1.5s infinite;
    }
    #preloader.hidden {
      opacity: 0;
      pointer-events: none;
    }
    @keyframes pulse {
      0% { transform: scale(1); }
      50% { transform: scale(1.2); }
      100% { transform: scale(1); }
    }
    header {
      background-color: #000;
      position: sticky;
      top: 0;
      z-index: 1000;
      padding: 20px 0;
      box-shadow: 0 2px 6px rgba(0, 0, 0, 0.6);
    }
    .nav {
      display: flex;
      justify-content: space-between;
      align-items: center;
      flex-wrap: wrap;
    }
    .nav img {
      max-height: 50px;
    }
    .nav-links {
      display: flex;
      align-items: center;
    }
    .nav-links a {
      margin-left: 20px;
      font-weight: 600;
      color: #fff;
      transition: color 0.3s ease;
    }
    .nav-links a:hover {
      color: #ff1a1a;
    }
    #language-select {
      background: #222;
      color: #fff;
      border: none;
      padding: 8px;
      border-radius: 5px;
      margin-left: 20px;
      font-family: 'Montserrat', sans-serif;
      cursor: pointer;
    }
    .menu-toggle {
      display: none;
      background: none;
      border: none;
      cursor: pointer;
      padding: 10px;
    }
    .menu-toggle svg {
      fill: #fff;
      width: 30px;
      height: 30px;
      transition: fill 0.3s ease;
    }
    .menu-toggle:hover svg {
      fill: #ff1a1a;
    }
    .btn-primary {
      background: #ff1a1a;
      color: white;
      padding: 12px 24px;
      border-radius: 50px;
      font-weight: 600;
      font-size: 16px;
      transition: transform 0.3s ease, background 0.3s ease;
      position: relative;
      overflow: hidden;
      will-change: transform;
    }
    .btn-primary:hover {
      background: #ff4d4d;
      transform: scale(1.05);
      box-shadow: 0 4px 15px rgba(255, 77, 77, 0.4);
    }
    .btn-primary:active {
      transform: scale(0.95);
    }
    .btn-primary.loading::after {
      content: '';
      position: absolute;
      width: 20px;
      height: 20px;
      border: 2px solid #fff;
      border-top-color: transparent;
      border-radius: 50%;
      animation: spin 0.6s linear infinite;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
    }
    @keyframes spin {
      to { transform: translate(-50%, -50%) rotate(360deg); }
    }
    .section {
      padding: 60px 0;
      animation: slideUp 1s ease forwards;
      opacity: 0;
    }
    .section.show {
      opacity: 1;
    }
    .section h2 {
      font-size: 2rem;
      color: #ff1a1a;
      margin-bottom: 30px;
      text-align: center;
    }
    .event-list {
      display: flex;
      flex-direction: column;
      gap: 20px;
    }
    .event-item {
      background: #1a1a1a;
      border: 1px solid #333;
      border-radius: 10px;
      padding: 20px;
      display: flex;
      flex-direction: column;
      gap: 10px;
      transition: transform 0.3s ease, box-shadow 0.3s ease, background 0.3s ease;
      will-change: transform, box-shadow;
      opacity: 0;
      animation: fadeInUp 0.5s ease forwards;
    }
    .event-item:nth-child(2) { animation-delay: 0.1s; }
    .event-item:nth-child(3) { animation-delay: 0.2s; }
    .event-item:hover {
      transform: scale(1.03);
      box-shadow: 0 6px 20px rgba(255, 77, 77, 0.2);
      background: #222;
    }
    .event-info {
      display: flex;
      flex-direction: column;
      gap: 5px;
    }
    .event-item strong {
      color: #fff;
    }
    .event-error {
      text-align: center;
      color: #ff4d4d;
      font-size: 1.1rem;
    }
    /* Product Page Styles */
    #product-page, #bio-page {
      display: none;
      background: #1a1a1a;
      padding: 40px 20px;
      min-height: 100vh;
      animation: fadeIn 0.5s ease;
    }
    #product-page.show, #bio-page.show {
      display: block;
    }
    .product-container, .bio-container {
      max-width: 800px;
      margin: 0 auto;
      display: flex;
      flex-direction: column;
      gap: 20px;
    }
    .product-image img, .bio-container img {
      width: 100%;
      max-height: 400px;
      object-fit: cover;
      border-radius: 10px;
      animation: slideUp 0.5s ease;
    }
    .product-details, .bio-details {
      display: flex;
      flex-direction: column;
      gap: 15px;
      animation: slideUp 0.5s ease 0.2s;
      opacity: 0;
      animation-fill-mode: forwards;
    }
    .product-details h1, .bio-details h1 {
      font-size: 2rem;
      color: #ff1a1a;
    }
    .product-details p, .bio-details p {
      color: #ccc;
    }
    .product-details .btn-primary {
      align-self: center;
      width: fit-content;
    }
    .back-btn {
      background: #333;
      color: #fff;
      padding: 10px 20px;
      border-radius: 50px;
      font-weight: 600;
      transition: background 0.3s ease;
      text-align: center;
    }
    .back-btn:hover {
      background: #555;
    }
    footer {
      background: #000;
      color: #ccc;
      text-align: center;
      padding: 40px 20px;
      margin-top: 40px;
    }
    footer .logo {
      max-width: 120px;
      margin-bottom: 20px;
    }
    footer a {
      color: #ff4d4d;
      font-weight: 600;
      display: inline-block;
      margin: 0 10px;
    }
    @keyframes fadeIn {
      from { opacity: 0; }
      to { opacity: 1; }
    }
    @keyframes slideUp {
      from { opacity: 0; transform: translateY(20px); }
      to { opacity: 1; transform: translateY(0); }
    }
    @keyframes fadeInUp {
      from { opacity: 0; transform: translateY(30px); }
      to { opacity: 1; transform: translateY(0); }
    }
    @keyframes slideDown {
      from { opacity: 0; transform: translateY(-10px); }
      to { opacity: 1; transform: translateY(0); }
    }
    @media (max-width: 768px) {
      .nav {
        flex-direction: row;
        justify-content: space-between;
        align-items: center;
        padding: 0 20px;
      }
      .nav-links {
        display: none;
        flex-direction: column;
        align-items: center;
        position: absolute;
        top: 80px;
        left: 0;
        width: 100%;
        background: #1a1a1a;
        padding: 20px;
        border-bottom: 1px solid #333;
      }
      .nav-links.nav-active {
        display: flex;
        animation: slideDown 0.3s ease forwards;
      }
      .nav-links a, #language-select {
        margin: 10px 0;
      }
      .menu-toggle {
        display: block;
      }
      .product-container, .bio-container {
        flex-direction: column;
      }
      .product-image img, .bio-container img {
        max-height: 300px;
      }
      .product-details h1, .bio-details h1 {
        font-size: 1.5rem;
      }
    }
    @media (max-width: 480px) {
      .section h2 {
        font-size: 1.5rem;
      }
      .btn-primary {
        padding: 10px 20px;
        font-size: 14px;
      }
      .event-item {
        padding: 10px;
      }
      .product-image img, .bio-container img {
        max-height: 200px;
      }
    }
  </style>
</head>
<body>
  <!-- Preloader -->
  <div id="preloader">
    <img src="https://raw.githubusercontent.com/itsdjjohn/djjohn/main/DJ%20JOHN%20LOGO%20BLANCO.png" alt="DJ John Logo">
  </div>

  <header>
    <div class="container nav">
      <a href="#" id="logo-link">
        <img src="https://raw.githubusercontent.com/itsdjjohn/djjohn/main/DJ%20JOHN%20LOGO%20BLANCO.png" alt="DJ John Logo" />
      </a>
      <button class="menu-toggle" aria-label="Toggle menu">
        <svg viewBox="0 0 24 24">
          <path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/>
        </svg>
      </button>
      <div class="nav-links">
        <a href="#tour" data-lang-key="nav-tour">Tour</a>
        <a href="#" id="bio-link" data-lang-key="nav-bio">Biografía</a>
        <a href="#contact" data-lang-key="nav-contact">Contacto</a>
        <select id="language-select" onchange="changeLanguage()">
          <option value="es">Español</option>
          <option value="en">English</option>
        </select>
      </div>
    </div>
  </header>

  <main class="container" id="main-content">
    <section id="tour" class="section">
      <h2 data-lang-key="tour-title">Próximos Eventos</h2>
      <div class="event-list" id="event-list">
        <!-- Eventos serán cargados dinámicamente con JavaScript -->
      </div>
    </section>

    <section id="contact" class="section">
      <h2 data-lang-key="contact-title">Contacto</h2>
      <form action="https://formspree.io/f/mgvkeyrd" method="POST" style="max-width: 600px; margin: 0 auto;">
        <input type="text" name="name" placeholder="Tu nombre" data-lang-placeholder="contact-name" required style="width: 100%; padding: 12px; margin-bottom: 15px; border: none; border-radius: 8px; background: #222; color: white;" />
        <input type="email" name="email" placeholder="Tu correo" data-lang-placeholder="contact-email" required style="width: 100%; padding: 12px; margin-bottom: 15px; border: none; border-radius: 8px; background: #222; color: white;" />
        <textarea name="message" placeholder="¿En qué puedo ayudarte?" data-lang-placeholder="contact-message" required style="width: 100%; padding: 12px; height: 150px; border: none; border-radius: 8px; background: #222; color: white;"></textarea>
        <button type="submit" class="btn-primary" data-lang-key="contact-submit">Enviar</button>
      </form>
      <p style="text-align: center; margin-top: 20px;">
        <a href="mailto:esquiveljohn2@gmail.com" data-lang-key="contact-bookings">Bookings: esquiveljohn2@gmail.com</a>
      </p>
    </section>
  </main>

  <!-- Bio Page -->
  <section id="bio-page">
    <div class="bio-container">
      <a href="#" class="back-btn" id="bio-back-btn" data-lang-key="back-btn">Volver</a>
      <div class="bio-details">
        <h1 data-lang-key="bio-title">Biografía</h1>
        <img src="https://github.com/itsdjjohn/djjohn/blob/main/DSC09235.jpg?raw=true" alt="DJ John" style="max-width: 300px; border-radius: 12px; display: block; margin: 0 auto 20px;" loading="lazy" />
        <p style="text-align: center; max-width: 800px; margin: 0 auto;" data-lang-key="bio-text">
          DJ John es un DJ y productor, nacido en la Ciudad de Panamá. Es conocido por su estilo único y su habilidad para mezclar diferentes géneros. Comenzó su carrera en la escena de la música electrónica a los 13 años, tocando en fiestas y eventos locales. Eventualmente, su talento y dedicación lo llevaron a presentarse en clubes de renombre nacional. Ha tocado en algunos de los festivales más grandes de Panamá como PARADISE 507 y PARADISE PESKITO (Carnavales).
        </p>
      </div>
    </div>
  </section>

  <!-- Product Page Template -->
  <section id="product-page">
    <div class="product-container">
      <a href="#" class="back-btn" id="product-back-btn" data-lang-key="back-btn">Volver</a>
      <div class="product-image">
        <img id="product-image" src="" alt="Evento" loading="lazy">
      </div>
      <div class="product-details">
        <h1 id="product-title"></h1>
        <p id="product-date"></p>
        <p id="product-location"></p>
        <p id="product-description"></p>
        <a id="product-buy-btn" href="#" class="btn-primary" target="_blank" data-lang-key="buy-ticket">Comprar Entradas</a>
      </div>
    </div>
  </section>

  <footer>
    <img src="https://raw.githubusercontent.com/itsdjjohn/djjohn/main/DJ%20JOHN%20LOGO%20BLANCO.png" alt="DJ John Logo" class="logo" loading="lazy">
    <p data-lang-key="footer-follow">Sígueme en:</p>
    <a href="https://instagram.com/itsdjjohn" target="_blank">Instagram</a>
    <a href="https://facebook.com/itsdjjohn" target="_blank">Facebook</a>
    <p style="margin-top: 10px; font-size: 12px; color: #888;" data-lang-key="footer-copyright">© 2025 DJ John. Todos los derechos reservados.</p>
  </footer>

  <script>
    // Language switcher
    const translations = {
      es: {
        'nav-tour': 'Tour',
        'nav-bio': 'Biografía',
        'nav-contact': 'Contacto',
        'tour-title': 'Próximos Eventos',
        'buy-ticket': 'Comprar Entradas',
        'bio-title': 'Biografía',
        'bio-text': 'DJ John es un DJ y productor, nacido en la Ciudad de Panamá. Es conocido por su estilo único y su habilidad para mezclar diferentes géneros. Comenzó su carrera en la escena de la música electrónica a los 13 años, tocando en fiestas y eventos locales. Eventualmente, su talento y dedicación lo llevaron a presentarse en clubes de renombre nacional. Ha tocado en algunos de los festivales más grandes de Panamá como PARADISE 507 y PARADISE PESKITO (Carnavales).',
        'contact-title': 'Contacto',
        'contact-name': 'Tu nombre',
        'contact-email': 'Tu correo',
        'contact-message': '¿En qué puedo ayudarte?',
        'contact-submit': 'Enviar',
        'contact-bookings': 'Bookings: esquiveljohn2@gmail.com',
        'footer-follow': 'Sígueme en:',
        'footer-copyright': '© 2025 DJ John. Todos los derechos reservados.',
        'back-btn': 'Volver'
      },
      en: {
        'nav-tour': 'Tour',
        'nav-bio': 'Biography',
        'nav-contact': 'Contact',
        'tour-title': 'Upcoming Events',
        'buy-ticket': 'Buy Tickets',
        'bio-title': 'Biography',
        'bio-text': 'DJ John is a DJ and producer, born in Panama City. He is known for his unique style and ability to mix different genres. He began his career in the electronic music scene at age 13, playing at local parties and events. Eventually, his talent and dedication led him to play in nationally renowned clubs. He has played some of the biggest festivals in Panama like PARADISE 507 and PARADISE PESKITO (Carnivals).',
        'contact-title': 'Contact',
        'contact-name': 'Your name',
        'contact-email': 'Your email',
        'contact-message': 'How can I help you?',
        'contact-submit': 'Send',
        'contact-bookings': 'Bookings: esquiveljohn2@gmail.com',
        'footer-follow': 'Follow me on:',
        'footer-copyright': '© 2025 DJ John. All rights reserved.',
        'back-btn': 'Back'
      }
    };

    function changeLanguage() {
      const lang = document.getElementById('language-select').value;
      document.querySelectorAll('[data-lang-key]').forEach(element => {
        element.textContent = translations[lang][element.getAttribute('data-lang-key')];
      });
      document.querySelectorAll('[data-lang-placeholder]').forEach(element => {
        element.placeholder = translations[lang][element.getAttribute('data-lang-placeholder')];
      });
      // Recargar eventos para actualizar formato de fechas
      loadEvents();
    }

    // Cargar eventos desde Bandsintown API
    async function loadEvents() {
      const eventList = document.getElementById('event-list');
      const lang = document.getElementById('language-select').value;
      eventList.innerHTML = ''; // Limpiar lista

      try {
        const response = await fetch('https://rest.bandsintown.com/artists/id_86889/events?app_id=6ddc274027f79a574321428def39a357');
        const events = await response.json();

        // Filtrar eventos futuros
        const now = new Date();
        const futureEvents = events.filter(event => new Date(event.datetime) >= now);

        if (futureEvents.length === 0) {
          eventList.innerHTML = `<p class="event-error">${lang === 'es' ? 'No hay eventos próximos.' : 'No upcoming events.'}</p>`;
          return;
        }

        futureEvents.forEach(event => {
          const date = new Date(event.datetime);
          const formattedDate = new Intl.DateTimeFormat(lang === 'es' ? 'es-ES' : 'en-US', {
            month: 'short',
            day: 'numeric',
            year: 'numeric'
          }).format(date).replace(/^./, str => str.toUpperCase());

          const eventItem = document.createElement('div');
          eventItem.className = 'event-item';
          eventItem.innerHTML = `
            <div class="event-info">
              <strong>📅 ${formattedDate}</strong>
              <h3>${event.title}</h3>
              <span>📍 ${event.venue.city}, ${event.venue.country}</span>
            </div>
            <a href="#" class="btn-primary buy-ticket" data-event-id="${event.id}" data-lang-key="buy-ticket">
              ${translations[lang]['buy-ticket']}
            </a>
          `;
          eventList.appendChild(eventItem);
        });

        // Añadir eventos de clic para los botones de compra
        document.querySelectorAll('.buy-ticket').forEach(button => {
          button.addEventListener('click', async (e) => {
            e.preventDefault();
            button.classList.add('loading');
            const eventId = button.getAttribute('data-event-id');
            try {
              const event = futureEvents.find(ev => ev.id === eventId);
              if (event) {
                showProductPage(event, lang);
              }
            } catch (error) {
              console.error('Error al mostrar la página de producto:', error);
            } finally {
              button.classList.remove('loading');
            }
          });
        });
      } catch (error) {
        console.error('Error al cargar eventos:', error);
        eventList.innerHTML = `<p class="event-error">${lang === 'es' ? 'Error al cargar los eventos.' : 'Error loading events.'}</p>`;
      }
    }

    // Mostrar página de producto
    function showProductPage(event, lang) {
      const mainContent = document.getElementById('main-content');
      const productPage = document.getElementById('product-page');
      const bioPage = document.getElementById('bio-page');
      const productImage = document.getElementById('product-image');
      const productTitle = document.getElementById('product-title');
      const productDate = document.getElementById('product-date');
      const productLocation = document.getElementById('product-location');
      const productDescription = document.getElementById('product-description');
      const productBuyBtn = document.getElementById('product-buy-btn');

      // Ocultar contenido principal y página de biografía, mostrar página de producto
      mainContent.style.display = 'none';
      bioPage.classList.remove('show');
      productPage.classList.add('show');

      // Rellenar datos
      productImage.src = event.image_url || 'https://raw.githubusercontent.com/itsdjjohn/djjohn/main/DSC09235.jpg';
      productTitle.textContent = event.title;
      const date = new Date(event.datetime);
      productDate.textContent = `${lang === 'es' ? 'Fecha:' : 'Date:'} ${new Intl.DateTimeFormat(lang === 'es' ? 'es-ES' : 'en-US', {
        month: 'long',
        day: 'numeric',
        year: 'numeric',
        hour: 'numeric',
        minute: 'numeric'
      }).format(date)}`;
      productLocation.textContent = `${lang === 'es' ? 'Ubicación:' : 'Location:'} ${event.venue.city}, ${event.venue.country}${event.venue.name ? `, ${event.venue.name}` : ''}`;
      productDescription.textContent = event.description || (lang === 'es' ? 'No hay descripción disponible.' : 'No description available.');
      productBuyBtn.href = event.ticket_url || event.url;

      // Botón de volver
      document.getElementById('product-back-btn').addEventListener('click', (e) => {
        e.preventDefault();
        productPage.classList.remove('show');
        mainContent.style.display = 'block';
      });
    }

    // Mostrar página de biografía
    function showBioPage() {
      const mainContent = document.getElementById('main-content');
      const productPage = document.getElementById('product-page');
      const bioPage = document.getElementById('bio-page');

      // Ocultar contenido principal y página de producto, mostrar página de biografía
      mainContent.style.display = 'none';
      productPage.classList.remove('show');
      bioPage.classList.add('show');

      // Botón de volver
      document.getElementById('bio-back-btn').addEventListener('click', (e) => {
        e.preventDefault();
        bioPage.classList.remove('show');
        mainContent.style.display = 'block';
      });
    }

    // Toggle menú en móviles
    document.querySelector('.menu-toggle').addEventListener('click', () => {
      const navLinks = document.querySelector('.nav-links');
      navLinks.classList.toggle('nav-active');
    });

    // Cerrar menú al hacer clic en un enlace
    document.querySelectorAll('.nav-links a').forEach(link => {
      link.addEventListener('click', () => {
        const navLinks = document.querySelector('.nav-links');
        navLinks.classList.remove('nav-active');
      });
    });

    // Cerrar menú al cambiar idioma
    document.getElementById('language-select').addEventListener('change', () => {
      const navLinks = document.querySelector('.nav-links');
      navLinks.classList.remove('nav-active');
    });

    // Manejo de clic en el enlace de biografía
    document.getElementById('bio-link').addEventListener('click', (e) => {
      e.preventDefault();
      showBioPage();
    });

    // Manejo de clic en el logo
    document.getElementById('logo-link').addEventListener('click', (e) => {
      e.preventDefault();
      showBioPage();
    });

    // Manejo del preloader
    function hidePreloader() {
      const preloader = document.getElementById('preloader');
      preloader.classList.add('hidden');
      setTimeout(() => {
        preloader.style.display = 'none';
      }, 500); // Esperar a que termine la transición de opacidad
      // Cargar eventos después de ocultar el preloader
      loadEvents();
    }

    // Ocultar preloader cuando la página esté cargada
    window.addEventListener('load', () => {
      console.log('Evento load disparado');
      hidePreloader();
    });

    // Timeout de respaldo para ocultar el preloader después de 5 segundos
    setTimeout(() => {
      console.log('Timeout de respaldo para preloader');
      hidePreloader();
    }, 5000);

    // Intersection Observer para secciones
    const observer = new IntersectionObserver((entries) => {
      entries.forEach(entry => {
        if (entry.isIntersecting) {
          entry.target.classList.add('show');
        }
      });
    });
    document.querySelectorAll('.section').forEach(section => {
      observer.observe(section);
    });
  </script>
</body>
</html>