<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DJ JOHN | Official</title>

    <!-- FAVICON -->
    <link rel="icon" type="image/png" href="images/favicon.png">

    <!-- CSS -->
    <link rel="stylesheet" href="styles.css">
</head>

<body>

    <!-- PRELOADER -->
    <div id="preloader">
        <img src="images/logo.png" alt="DJ John Logo">
    </div>

    <div id="content">

        <!-- NAVIGATION -->
        <header>
            <div class="nav">
                <img src="images/logo.png" alt="DJ John Logo">

                <nav class="nav-links">
                    <a href="#hero">Inicio</a>
                    <a href="#events-section">Eventos</a>
                    <a href="#about-section">Bio</a>
                    <a href="#contact-section">Contacto</a>

                    <select id="lang" class="lang-select">
                        <option value="es">ES</option>
                        <option value="en">EN</option>
                    </select>
                </nav>

                <button class="menu-toggle">☰</button>
            </div>
        </header>

        <!-- HERO -->
        <section id="hero" class="hero">
            <div>
                <h1 class="gradient-text">DJ JOHN</h1>
                <p id="hero-text">Música, energía y vibra única.</p>
                <a href="#events-section" class="btn">Ver Eventos</a>
            </div>
        </section>

        <!-- TICKER -->
        <section class="ticker">
            <div class="ticker-inner">
                <span>@ITS DJ JOHN</span>
                <span>@ITS DJ JOHN</span>
                <span>@ITS DJ JOHN</span>
            </div>
        </section>

        <!-- EVENTS -->
        <section id="events-section" class="events">
            <h2 id="events-title" class="section-title gradient-title">EVENTOS</h2>

            <div id="events" class="tour-grid"></div>

            <p id="no-events" class="no-events">No hay eventos próximos</p>
        </section>

        <!-- ABOUT -->
        <section id="about-section" class="about">
            <img src="images/about.jpg" alt="DJ John">

            <div class="about-text">
                <h2 id="about-title" class="gradient-title">Quién Soy</h2>

                <p id="bio-text">
                    DJ John es un DJ y productor, nacido en la Ciudad de Panamá.  
                    Es conocido por su estilo único y su capacidad para mezclar 
                    diferentes géneros. Comenzó su carrera en la música electrónica 
                    a los 13 años tocando en eventos locales.

                    Ha tocado en los festivales más grandes de Panamá:
                    <br><br>
                    • Paradise 507  
                    • Paradise Peskito (Carnavales)  
                    • Boom Hospitality  
                    • SZN  
                    • Opening DJ de Guaynaa (por Bamboo)
                    • DJ invitado en el concierto de Boza  
                </p>
            </div>
        </section>

        <!-- CONTACT -->
        <section id="contact-section" class="contact">
            <h2 id="contact-title" class="gradient-title">Contacto</h2>

            <form id="contactForm">
                <input type="text" name="name" placeholder="Tu nombre" required>
                <input type="email" name="email" placeholder="Tu correo" required>
                <textarea name="message" placeholder="Mensaje" required></textarea>

                <button type="submit">Enviar</button>
            </form>
        </section>

        <!-- FOOTER -->
        <footer>
            <img src="images/logo.png" alt="logo">

            <div class="socials">
                <a href="https://instagram.com/itsdjjohn" target="_blank">Instagram</a>
                <a href="https://www.tiktok.com/@itsdjjohn" target="_blank">TikTok</a>
                <a href="https://open.spotify.com" target="_blank">Spotify</a>
            </div>

            <p>© 2025 DJ John — Todos los derechos reservados.</p>
        </footer>

    </div>

<!-- SCRIPT (TODO CENTRALIZADO) -->
<script>
const $ = id => document.getElementById(id);

/* PRELOADER */
window.addEventListener("load", () => {
    const pre = $("preloader");
    const content = $("content");

    if (pre) {
        pre.style.opacity = "0";
        setTimeout(() => pre.style.display = "none", 800);
    }
    content?.classList.add("show");
    loadEvents();
});

/* MOBILE MENU */
document.querySelector(".menu-toggle")
    .addEventListener("click", () =>
        document.querySelector(".nav-links").classList.toggle("show")
);

/* BANDSINTOWN */
async function loadEvents() {
    const container = $("events");
    const noEvents = $("no-events");

    try {
        const res = await fetch("https://rest.bandsintown.com/artists/id_86889/events?app_id=itsdjjohn.com");
        const events = await res.json();

        if (!Array.isArray(events) || events.length === 0) {
            noEvents.style.display = "block";
            return;
        }

        container.innerHTML = "";
        const now = new Date();

        events.forEach(e => {
            if (new Date(e.datetime) < now) return;

            const date = new Date(e.datetime)
                .toLocaleDateString("es-PA", { weekday:"short", day:"numeric", month:"short" })
                .toUpperCase();

            const ticketUrl = e.url || "#";

            container.innerHTML += `
                <div class="event-card">
                    <div class="event-date">${date}</div>
                    <h3>${e.venue.name}</h3>
                    <p>${e.venue.city}, ${e.venue.country}</p>
                    <a href="${ticketUrl}" class="btn" target="_blank">Tickets</a>
                </div>
            `;
        });

    } catch (err) {
        console.error("Bandsintown Error:", err);
        noEvents.style.display = "block";
    }
}

/* LANGUAGE SELECTOR */
const translations = {
    es: {
        hero: "Música, energía y vibra única.",
        events: "EVENTOS",
        about: "Quién Soy",
        contact: "Contacto",
        noEvents: "No hay eventos próximos"
    },
    en: {
        hero: "Music, energy and unique vibes.",
        events: "EVENTS",
        about: "About Me",
        contact: "Contact",
        noEvents: "No upcoming events"
    }
};

$("lang").addEventListener("change", () => {
    const l = $("lang").value;

    $("hero-text").textContent = translations[l].hero;
    $("events-title").textContent = translations[l].events;
    $("about-title").textContent = translations[l].about;
    $("contact-title").textContent = translations[l].contact;
    $("no-events").textContent = translations[l].noEvents;
});

/* CONTACT FORM */
$("contactForm").addEventListener("submit", async e => {
    e.preventDefault();
    const data = Object.fromEntries(new FormData(e.target).entries());

    await fetch("https://formspree.io/f/mnqebgje", {
        method: "POST",
        headers: {"Content-Type":"application/json"},
        body: JSON.stringify(data)
    });

    alert("Mensaje enviado. ¡Gracias!");
    e.target.reset();
});
</script>

</body>
</html>
