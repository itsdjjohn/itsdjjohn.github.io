<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ITS DJ JOHN – Tour</title>
  <link rel="icon" href="images/favicon.png">
  <link href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@300..700&display=swap" rel="stylesheet">
  <link href="output.css" rel="stylesheet">
</head>
<body>
  <div id="preloader" class="pointer-events-auto"><img src="images/logo.png" alt="DJ John"></div>

  <div id="content" class="hidden">
    <header>
      <div class="nav">
        <img src="images/logo.png" alt="DJ John">
        <nav class="nav-links">
          <a href="index.html">HOME</a>
          <a href="tour.html">TOUR</a>
          <a href="about.html">ABOUT</a>
          <a href="contact.html">CONTACT</a>
        </nav>
        <button class="menu-toggle">☰</button>
      </div>
    </header>

    <main>
      <section class="pt-32 pb-20 text-center">
        <h1 class="text-6xl md:text-9xl font-black"><span class="gradient-text">TOUR DATES</span></h1>
      </section>

      <div class="tour-grid" id="events"></div>
      <div class="text-center py-20 text-2xl text-gray-500" id="no-events" style="display:none">No hay eventos próximos por ahora</div>
    </main>

    <footer>
      <img src="images/logo.png" alt="DJ John">
      <div class="socials">
        <a href="https://instagram.com/itsdjjohn" target="_blank">Instagram</a>
        <a href="https://facebook.com/itsdjjohn" target="_blank">Facebook</a>
      </div>
      <p>© 2025 ITS DJ JOHN</p>
    </footer>
  </div>

  <script>
    window.onload = () => {
      const preloader = document.getElementById('preloader');
      const content = document.getElementById('content');
      setTimeout(() => {
        preloader.style.opacity = '0';
        preloader.classList.remove('pointer-events-auto');
        preloader.classList.add('pointer-events-none');
        content.classList.remove('hidden');
        content.classList.add('show');
        loadEvents();
      }, 800);
    };
    document.querySelector('.menu-toggle').onclick = () => {
      document.querySelector('.nav-links').classList.toggle('show');
    };
    function loadEvents() {
      fetch('https://rest.bandsintown.com/artists/itsdjjohn/events?app_id=js_itsdjjohn.com')
        .then(r => r.json())
        .then(events => {
          const container = document.getElementById('events');
          if (!events || events.length === 0) { document.getElementById('no-events').style.display = 'block'; return; }
          events.forEach(e => {
            const date = new Date(e.datetime).toLocaleDateString('es-PA', { weekday: 'short', day: 'numeric', month: 'short' }).toUpperCase();
            const card = document.createElement('div');
            card.className = 'event-card';
            card.innerHTML = `<div class="text-3xl font-black mb-4">${date}</div><h3>${e.venue.name}</h3><p>${e.venue.location}</p><a href="${e.url}" target="_blank" class="btn mt-6 inline-block">TICKETS</a>`;
            container.appendChild(card);
          });
        });
    }
  </script>
</body>
</html>